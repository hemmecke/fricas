
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Installation Guide &#8212; FriCAS</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/classic.css" />
    <link rel="stylesheet" href="_static/style.css" type="text/css" />
    
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Help" href="help.html" />
    <link rel="prev" title="Download" href="download.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="help.html" title="Help"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="download.html" title="Download"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">FriCAS</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="download.html" accesskey="U">Download</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Installation Guide</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="installation-guide">
<h1>Installation Guide<a class="headerlink" href="#installation-guide" title="Permalink to this heading">¶</a></h1>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#quick-installation" id="id2">Quick installation</a></p></li>
<li><p><a class="reference internal" href="#prerequisites" id="id3">Prerequisites</a></p>
<ul>
<li><p><a class="reference internal" href="#standard-build-tools" id="id4">Standard build tools</a></p></li>
<li><p><a class="reference internal" href="#lisp" id="id5">Lisp</a></p></li>
<li><p><a class="reference internal" href="#x-libraries-optional-but-needed-for-graphics-and-hyperdoc" id="id6">X libraries (optional, but needed for graphics and HyperDoc)</a></p></li>
<li><p><a class="reference internal" href="#xvfb-optional-but-highly-recommended" id="id7">xvfb (optional, but highly recommended)</a></p></li>
<li><p><a class="reference internal" href="#gmp-optional" id="id8">GMP (optional)</a></p></li>
<li><p><a class="reference internal" href="#latex-optional" id="id9">LaTeX (optional)</a></p></li>
<li><p><a class="reference internal" href="#jfricas-optional" id="id10">jFriCAS (optional)</a></p>
<ul>
<li><p><a class="reference internal" href="#installation-of-quicklisp-and-hunchentoot" id="id11">Installation of quicklisp and hunchentoot</a></p></li>
<li><p><a class="reference internal" href="#jfricas-installation" id="id12">jFriCAS installation</a></p></li>
<li><p><a class="reference internal" href="#optional-install-jupytext" id="id13">(optional) Install JupyText</a></p></li>
<li><p><a class="reference internal" href="#make-jupytext-available" id="id14">Make Jupytext available</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#sphinxdoc-optional" id="id15">SphinxDoc (optional)</a></p></li>
<li><p><a class="reference internal" href="#aldor-optional" id="id16">Aldor (optional)</a></p></li>
<li><p><a class="reference internal" href="#extra-libraries-needed-by-ecl" id="id17">Extra libraries needed by ECL</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#detailed-installation-instructions" id="id18">Detailed installation instructions</a></p>
<ul>
<li><p><a class="reference internal" href="#extra-information" id="id19">Extra information</a></p></li>
<li><p><a class="reference internal" href="#hyperdoc-and-graphics" id="id20">HyperDoc and graphics</a></p></li>
<li><p><a class="reference internal" href="#algebra-optimization" id="id21">Algebra optimization</a></p></li>
<li><p><a class="reference internal" href="#using-gmp-with-sbcl-or-clozure-cl" id="id22">Using GMP with SBCL or Clozure CL</a></p></li>
<li><p><a class="reference internal" href="#building-documentation" id="id23">Building documentation</a></p></li>
<li><p><a class="reference internal" href="#aldor-library-libfricas-al" id="id24">Aldor library libfricas.al</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#execute-jfricas-and-enjoy" id="id25">Execute jfricas and enjoy</a></p></li>
<li><p><a class="reference internal" href="#install-frimacs-optional" id="id26">Install frimacs (optional)</a></p></li>
<li><p><a class="reference internal" href="#known-problems" id="id27">Known problems</a></p></li>
</ul>
</nav>
<section id="quick-installation">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">Quick installation</a><a class="headerlink" href="#quick-installation" title="Permalink to this heading">¶</a></h2>
<p>FriCAS now tries to support standard GNU build/installation
conventions.  So if you have sources and all prerequisites, then</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>./configure &amp;&amp; make &amp;&amp; sudo make install
</pre></div>
</div>
<p>should work.  The above will install FriCAS files into
<code class="docutils literal notranslate"><span class="pre">/usr/local/lib/fricas/</span></code>  and put the <code class="docutils literal notranslate"><span class="pre">fricas</span></code> command into
<code class="docutils literal notranslate"><span class="pre">/usr/local/bin/</span></code>.
You can give arguments to <code class="docutils literal notranslate"><span class="pre">configure</span></code> to change those locations.</p>
</section>
<section id="prerequisites">
<h2><a class="toc-backref" href="#id3" role="doc-backlink">Prerequisites</a><a class="headerlink" href="#prerequisites" title="Permalink to this heading">¶</a></h2>
<section id="standard-build-tools">
<h3><a class="toc-backref" href="#id4" role="doc-backlink">Standard build tools</a><a class="headerlink" href="#standard-build-tools" title="Permalink to this heading">¶</a></h3>
<p>To <em>build</em> FriCAS you need standard build tools like C compiler and
make.</p>
</section>
<section id="lisp">
<h3><a class="toc-backref" href="#id5" role="doc-backlink">Lisp</a><a class="headerlink" href="#lisp" title="Permalink to this heading">¶</a></h3>
<p>To <em>build</em> FriCAS you need <em>one</em> of the following Lisp variants:</p>
<ul>
<li><p><a class="reference external" href="http://sbcl.sourceforge.net/platform-table.html">SBCL</a> 1.0.7 or later (preferred)</p>
<p><a class="reference external" href="http://sbcl.sourceforge.net/platform-table.html">http://sbcl.sourceforge.net/platform-table.html</a></p>
</li>
<li><p><a class="reference external" href="http://ccl.clozure.com/manual/chapter2.2.html">Clozure CL</a> (former openmcl), starting from openmcl 1.1 prerelease
070512</p>
<p><a class="reference external" href="https://ccl.clozure.com/download.html">https://ccl.clozure.com/download.html</a></p>
</li>
<li><p><a class="reference external" href="http://ecls.sourceforge.net">ECL</a> 0.9l or later</p>
<p><a class="reference external" href="https://common-lisp.net/project/ecl">https://common-lisp.net/project/ecl</a></p>
</li>
<li><p><a class="reference external" href="http://clisp.cons.org">CLISP</a> 2.41 or later</p></li>
<li><p><a class="reference external" href="https://www.cons.org/cmucl/">CMUCL</a></p></li>
<li><p>FriCAS builds also using <a class="reference external" href="https://www.gnu.org/software/gcl">GCL</a>, at least build using released version
2.6.12 works.  Build using newer GCL versions from git repository
fails.</p></li>
</ul>
<p>All Lisp implementations should give essentially the same
functionality, however performance (speed) may differ quite a lot.  ATM
CMU CL port should be considered experimental, it received only little
testing.  Also CMU CL seem to have problems on some machines.  By
default FriCAS tries to use SBCL, since it is fast and reliable.  On
64-bit AMD64 on average SBCL is the fastest one (9 times faster than
CLISP), Clozure CL the second (about 1.5 times slower than SBCL), than
GCL and ECL (about 3 times slower than SBCL) and CLISP is the slowest
one.  Note: very old versions of ECL were much (about 4 times) slower, you
should use reasonably new version if you care about speed.</p>
<p>Some computation work much faster on 64-bit machines, especially
when using SBCL.</p>
</section>
<section id="x-libraries-optional-but-needed-for-graphics-and-hyperdoc">
<h3><a class="toc-backref" href="#id6" role="doc-backlink">X libraries (optional, but needed for graphics and HyperDoc)</a><a class="headerlink" href="#x-libraries-optional-but-needed-for-graphics-and-hyperdoc" title="Permalink to this heading">¶</a></h3>
<p>On Debian (or Ubuntu) install the following packages.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>sudo apt install libx11-dev libxt-dev libice-dev \
                 libsm-dev libxau-dev libxdmcp-dev libxpm-dev
</pre></div>
</div>
</section>
<section id="xvfb-optional-but-highly-recommended">
<h3><a class="toc-backref" href="#id7" role="doc-backlink">xvfb (optional, but highly recommended)</a><a class="headerlink" href="#xvfb-optional-but-highly-recommended" title="Permalink to this heading">¶</a></h3>
<p>If you compile FriCAS from the <a class="reference external" href="https://github.com/hemmecke/fricas">FriCAS git repository</a>, and <code class="docutils literal notranslate"><span class="pre">configure</span></code>
does not detect the <code class="docutils literal notranslate"><span class="pre">xvfb-run</span></code> program, then graphic examples will
not be built.  See Section <a class="reference internal" href="#hyperdoc-and-graphics">HyperDoc and graphics</a> for more detail.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>sudo apt install xvfb
</pre></div>
</div>
</section>
<section id="gmp-optional">
<h3><a class="toc-backref" href="#id8" role="doc-backlink">GMP (optional)</a><a class="headerlink" href="#gmp-optional" title="Permalink to this heading">¶</a></h3>
<p>You you use SBCL or Clozure CL the <code class="docutils literal notranslate"><span class="pre">--enable-gmp</span></code> configure option
is available only if the development version of GMP is installed.
Note: using GMP should work on all SBCL and Clozure CL platforms
except for Clozure CL on Power PC.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>sudo apt install libgmp-dev
</pre></div>
</div>
</section>
<section id="latex-optional">
<h3><a class="toc-backref" href="#id9" role="doc-backlink">LaTeX (optional)</a><a class="headerlink" href="#latex-optional" title="Permalink to this heading">¶</a></h3>
<p>If you run FriCAS in <a class="reference external" href="https://www.gnu.org/software/emacs/">Emacs</a> (efricas) you can enable</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>)set output tex on
</pre></div>
</div>
<p>to show rendered TeX output.  For that to work, you need the following.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>sudo apt install texlive auctex dvipng
</pre></div>
</div>
<p>In order to build the <a class="reference external" href="https://hemmecke.github.io/fricas/book.pdf">FriCAS Book</a>, you also need the following
LaTeX packages (available from <a class="reference external" href="https://www.ctan.org/">CTAN</a>).</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>amsmath
breqn
tensor
mleftright
epsf
verbatim
hyperref
color
listings
makeidx
xparse
tikz
</pre></div>
</div>
</section>
<section id="jfricas-optional">
<h3><a class="toc-backref" href="#id10" role="doc-backlink">jFriCAS (optional)</a><a class="headerlink" href="#jfricas-optional" title="Permalink to this heading">¶</a></h3>
<p>There is currently a branch <code class="docutils literal notranslate"><span class="pre">wip/fricas-sbcl-hunchentoot</span></code> of the
<a class="reference external" href="https://github.com/hemmecke/fricas.git">FriCAS repository of Ralf Hemmecke</a>
that contains code to include the Hunchentoot webserver into the
<code class="docutils literal notranslate"><span class="pre">FRICASsys</span></code> lisp image of <a class="reference external" href="https://hemmecke.github.io/fricas/index.html">FriCAS</a>. That is aimed to be the future way
of running <a class="reference external" href="https://hemmecke.github.io/fricas/index.html">FriCAS</a> in a <a class="reference external" href="https://jupyter.org">Jupyter</a> notebook. It is currently
<strong>work-in-progress</strong>. It works, but do not rely on the actual source
code. That may change at any time untit it is ready to be included
into the official FriCAS repository.</p>
<p>There are a couple of things to install.</p>
<ol class="arabic simple">
<li><p>Quicklisp</p></li>
<li><p>Jupyter</p></li>
<li><p>jFriCAS</p></li>
</ol>
<p>Except for the file <code class="docutils literal notranslate"><span class="pre">$HOME/.jupyter/jupyter_notebook_config.py</span></code> that
maybe necessary to create, the following description will put most of
the things (in particular the git repositories) under the directory
<code class="docutils literal notranslate"><span class="pre">$FDIR</span></code>. FriCAS will be installed into <code class="docutils literal notranslate"><span class="pre">$FRICASINSTALL</span></code>. jFriCAS
and Jupyter will go into <code class="docutils literal notranslate"><span class="pre">$JFRICASINSTALL</span></code>. You can change any of
these paths or even install without a python virtual environment, but
there is no description for an installation without venv.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>FDIR=$HOME/fricas
GITREPOS=$FDIR
FRICASBUILD=$FDIR/build
FRICASINSTALL=$FDIR/install
export PATH=$FRICASINSTALL/bin:$PATH
VENV=$FDIR/venv
JFRICASINSTALL=$VENV/jfricas
QUICKLISPINSTALL=$FDIR/quicklisp
mkdir -p $FDIR $GITREPOS $FRICASBUILD $FRICASINSTALL $JFRICASINSTALL
</pre></div>
</div>
<section id="installation-of-quicklisp-and-hunchentoot">
<h4><a class="toc-backref" href="#id11" role="doc-backlink">Installation of quicklisp and hunchentoot</a><a class="headerlink" href="#installation-of-quicklisp-and-hunchentoot" title="Permalink to this heading">¶</a></h4>
<p>To be most flexible, install quicklisp and hunchentoot via quicklisp.
Note that we aim at a local installation of the Jupyter-FriCAS
connection, so no ssl is needed. Of course, you need not disable ssl,
but then you have to make sure that FRICASsys finds the <code class="docutils literal notranslate"><span class="pre">libssl.so</span></code>
in the appropriate version.</p>
<p>The following will create a new directory <code class="docutils literal notranslate"><span class="pre">QUICKLISPINSTALL</span></code>
(you can use any name, even the defaul <code class="docutils literal notranslate"><span class="pre">~/quicklisp/</span></code> should work).</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>cd $FDIR
curl -O https://beta.quicklisp.org/quicklisp.lisp
curl -O https://beta.quicklisp.org/quicklisp.lisp.asc
curl -O https://beta.quicklisp.org/release-key.txt

# Check integrity of the download (not absolutely necessary).
gpg --import release-key.txt
gpg --verify quicklisp.lisp.asc quicklisp.lisp

# Load QuickLisp

sbcl --load quicklisp.lisp \
     --eval &quot;(quicklisp-quickstart:install :path \&quot;$QUICKLISPINSTALL\&quot;)&quot; \
     --eval &quot;(push :hunchentoot-no-ssl *features*)&quot; \
     --eval &quot;(ql:quickload \&quot;hunchentoot\&quot;)&quot; \
     --eval &quot;(quit)&quot;
</pre></div>
</div>
</section>
<section id="jfricas-installation">
<h4><a class="toc-backref" href="#id12" role="doc-backlink">jFriCAS installation</a><a class="headerlink" href="#jfricas-installation" title="Permalink to this heading">¶</a></h4>
<p><a class="reference external" href="https://jfricas.readthedocs.io">jFriCAS</a> is the <a class="reference external" href="https://jupyter.org">Jupyter</a> notebook interface to <a class="reference external" href="https://hemmecke.github.io/fricas/index.html">FriCAS</a>. Of course,
<a class="reference external" href="https://jfricas.readthedocs.io">jFriCAS</a> needs <a class="reference external" href="https://jupyter.org">Jupyter</a> in a reasonably recent version (at least 4).</p>
<p>Install prerequisites if not yet available (needs root access, but it
may already be installed on your system).</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>sudo apt install python3-pip python3-venv
</pre></div>
</div>
<p>Prepare directories and download <a class="reference external" href="https://jfricas.readthedocs.io">jFriCAS</a>.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>cd $GITREPOS
git clone -b wip/fricas-jfricas https://github.com/hemmecke/jfricas
</pre></div>
</div>
<p>Install prerequisites, <a class="reference external" href="https://jupyter.org">Jupyter</a> and <a class="reference external" href="https://jfricas.readthedocs.io">jFriCAS</a>.</p>
<p><strong>WARNING</strong>: Do not install jfricas 1.0.0 from PyPI, as that will
currently not work. If you have it installed, then uninstall it first.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>python3 -m venv $JFRICASINSTALL
source $JFRICASINSTALL/bin/activate
pip3 install wheel jupyter
cd $GITREPOS/jfricas
pip3 install .
jupyter kernelspec list
</pre></div>
</div>
<p>The output of the last command should show something similar to the
following.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Available kernels:
  jfricas    /home/hemmecke/fricas/venv/jfricas/share/jupyter/kernels/jfricas
  python3    /home/hemmecke/fricas/venv/jfricas/share/jupyter/kernels/python3
</pre></div>
</div>
<p>Create the script <code class="docutils literal notranslate"><span class="pre">jfricas</span></code>.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>cat &gt; $FRICASINSTALL/bin/jfricas &lt;&lt;EOF
source $JFRICASINSTALL/bin/activate
jupyter notebook \$1
EOF
chmod +x $FRICASINSTALL/bin/jfricas
</pre></div>
</div>
<p>Start a new terminal or set the <code class="docutils literal notranslate"><span class="pre">PATH</span></code> on the commandline or inside
your <code class="docutils literal notranslate"><span class="pre">.bashrc</span></code> file and start <code class="docutils literal notranslate"><span class="pre">jfricas</span></code> from any directory (after
you have installed <a class="reference external" href="https://hemmecke.github.io/fricas/index.html">FriCAS</a>).</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>export PATH=$FRICASINSTALL/bin:$PATH
</pre></div>
</div>
<p>Note that inside jupyter the place from where you start
<code class="docutils literal notranslate"><span class="pre">jfricas</span></code> is the place where your notebooks will be stored.</p>
<p>If you want to enjoy nice looking output, then type the following
inside a notebook cell.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>)set output algebra off
setFormat!(FormatMathJax)$JFriCASSupport
</pre></div>
</div>
<p>You can go back to standard 2D ASCII output as follows.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>)set output formatted off
)set output algebra on
</pre></div>
</div>
</section>
<section id="optional-install-jupytext">
<h4><a class="toc-backref" href="#id13" role="doc-backlink">(optional) Install JupyText</a><a class="headerlink" href="#optional-install-jupytext" title="Permalink to this heading">¶</a></h4>
<p>Ordinary Jupyter notebooks use a special format in order to store
their content. They have the file extension <code class="docutils literal notranslate"><span class="pre">.ipynb</span></code>. It is an
incredible feature to be able to load and store notebooks as ordinary
FriCAS <code class="docutils literal notranslate"><span class="pre">.input</span></code> files. You can even synchronize between the
<code class="docutils literal notranslate"><span class="pre">.ipynb</span></code> and <code class="docutils literal notranslate"><span class="pre">.input</span></code> formats.</p>
<p>There are two types of cells in Jupyter Markdown documentation
cells and execution cells. With the help of JupyText, Markdown
cells will appear inside an <code class="docutils literal notranslate"><span class="pre">.input</span></code> file as <a class="reference external" href="https://hemmecke.github.io/fricas/index.html">FriCAS</a>
comments and execution cells appear without the <code class="docutils literal notranslate"><span class="pre">&quot;--</span> <span class="pre">&quot;</span></code>
comment prefix.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>source $JFRICASINSTALL/bin/activate
pip3 install jupytext
</pre></div>
</div>
<p>Enable the spad language and set the respective parameters.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>cd $HOME
J=$(find $JFRICASINSTALL -type d | grep &#39;/site-packages/jupytext$&#39;)
emacs $J/languages.py
</pre></div>
</div>
<p>Edit the file <code class="docutils literal notranslate"><span class="pre">$J/languages.py</span></code> and change appropriately.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># Jupyter magic commands that are also languages
_JUPYTER_LANGUAGES = [&quot;spad&quot;, &quot;R&quot;, ...]

# Supported file extensions (and languages)
# Please add more languages here (and add a few tests) - see CONTRIBUTING.md
_SCRIPT_EXTENSIONS = {
   &quot;.py&quot;: {&quot;language&quot;: &quot;python&quot;, &quot;comment&quot;: &quot;#&quot;},
    &quot;.input&quot;: {&quot;language&quot;: &quot;spad&quot;, &quot;comment&quot;: &quot;--&quot;},
    &quot;.input-test&quot;: {&quot;language&quot;: &quot;spad&quot;, &quot;comment&quot;: &quot;--&quot;},
    ...
}
</pre></div>
</div>
</section>
<section id="make-jupytext-available">
<h4><a class="toc-backref" href="#id14" role="doc-backlink">Make Jupytext available</a><a class="headerlink" href="#make-jupytext-available" title="Permalink to this heading">¶</a></h4>
<p>In Ubuntu 22.04 you need not do run the commands from this section.
It seemingly works without having to change something in the
configuration file. There were even reports that jfricas stopped
working if <code class="docutils literal notranslate"><span class="pre">c.NotebookApp.contents_manager_class</span></code> was set.  However,
for older versions of <a class="reference external" href="https://jupytext.readthedocs.io">JupyText</a> and/or <a class="reference external" href="https://jupyter.org">Jupyter</a>, the following had to be
configured.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">$HOME/.jupyter/jupyter_notebook_config.py</span></code> does not yet exist,
generate it.
<em>Note that this is outside the</em> <code class="docutils literal notranslate"><span class="pre">$FDIR</span></code> <em>directory.</em></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>jupyter notebook --generate-config
</pre></div>
</div>
<p>For the following see
<a class="reference external" href="https://jupyter-notebook.readthedocs.io/en/stable/config.html">https://jupyter-notebook.readthedocs.io/en/stable/config.html</a> .</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>sed -i &#39;s|^# *c.NotebookApp.use_redirect_file = .*|c.NotebookApp.use_redirect_file = False|&#39; $HOME/.jupyter/jupyter_notebook_config.py
</pre></div>
</div>
<p>The following enables JupyText.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>sed -i &#39;s|^# *c.NotebookApp.contents_manager_class =.*|c.NotebookApp.contents_manager_class = &quot;jupytext.TextFileContentsManager&quot;|&#39; $HOME/.jupyter/jupyter_notebook_config.py
</pre></div>
</div>
</section>
</section>
<section id="sphinxdoc-optional">
<h3><a class="toc-backref" href="#id15" role="doc-backlink">SphinxDoc (optional)</a><a class="headerlink" href="#sphinxdoc-optional" title="Permalink to this heading">¶</a></h3>
<p>The documentation is built via <a class="reference external" href="https://www.sphinx-doc.org">Sphinx</a>.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>sudo apt install python3 python3-pip
pip3 install -U Sphinx
</pre></div>
</div>
</section>
<section id="aldor-optional">
<h3><a class="toc-backref" href="#id16" role="doc-backlink">Aldor (optional)</a><a class="headerlink" href="#aldor-optional" title="Permalink to this heading">¶</a></h3>
<p>If you want to use <a class="reference external" href="https://github.com/aldorlang/aldor">Aldor</a> to extend the FriCAS library, you must, of
course, hava <a class="reference external" href="https://github.com/aldorlang/aldor">Aldor</a> installed, and add <code class="docutils literal notranslate"><span class="pre">--enable-aldor</span></code> to your
configure options when you compile FriCAS.</p>
</section>
<section id="extra-libraries-needed-by-ecl">
<h3><a class="toc-backref" href="#id17" role="doc-backlink">Extra libraries needed by ECL</a><a class="headerlink" href="#extra-libraries-needed-by-ecl" title="Permalink to this heading">¶</a></h3>
<p>This only applies if you use Debian ECL.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>sudo apt install libffi-dev
</pre></div>
</div>
</section>
</section>
<section id="detailed-installation-instructions">
<h2><a class="toc-backref" href="#id18" role="doc-backlink">Detailed installation instructions</a><a class="headerlink" href="#detailed-installation-instructions" title="Permalink to this heading">¶</a></h2>
<p>We assume that you have installed all necessary prerequisittes.</p>
<ol class="arabic" start="0">
<li><p>Set the following environment variables (see section jFriCAS above).</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>FDIR=$HOME/fricas
GITREPOS=$FDIR
FRICASBUILD=$FDIR/build
FRICASINSTALL=$FDIR/install
export PATH=$FRICASINSTALL/bin:$PATH
VENV=$FDIR/venv
JFRICASINSTALL=$VENV/jfricas
QUICKLISPINSTALL=$HOME/quicklisp
mkdir -p $FDIR $GITREPOS $FRICASBUILD $FRICASINSTALL $JFRICASINSTALL
</pre></div>
</div>
</li>
<li><p>Fetch sources.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>cd $FDIR
git clone -b wip/fricas-sbcl-hunchentoot https://github.com/hemmecke/fricas.git
</pre></div>
</div>
</li>
</ol>
<ol class="arabic" start="2">
<li><p>Create build directory and change to it</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>mkdir -p $FRICASBUILD
cd $FRICASBUILD
</pre></div>
</div>
</li>
<li><p>Then compile FriCAS with an out-of-source build.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>cd $FRICASBUILD
$GITREPOS/fricas/configure --prefix=$FRICASINSTALL --with-lisp=sbcl
</pre></div>
</div>
<p>Replace <code class="docutils literal notranslate"><span class="pre">sbcl</span></code> by <code class="docutils literal notranslate"><span class="pre">/path/to/your/lisp</span></code> if you want to use
another Lisp.</p>
<p>For example, use</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>--with-lisp=&quot;sbcl --dynamic-space-size 4096&quot;
</pre></div>
</div>
<p>to build with SBCL and 4 GiB dynamic space.</p>
<p>Enable the use of <a class="reference external" href="https://gmplib.org">GMP</a> by adding</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>--enable-gmp
</pre></div>
</div>
<p>Make FriCAS able to connect to Jupyter (jfricas) by adding</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>--enable-webspad --with-quicklisp=$QUICKLISPINSTALL
</pre></div>
</div>
<p>If you want to build of the Aldor library <code class="docutils literal notranslate"><span class="pre">libfricas.al</span></code>, then
add</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>--enable-aldor
</pre></div>
</div>
<p>Type</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$GITREPOS/fricas/configure --help
</pre></div>
</div>
<p>to see all possible options.</p>
</li>
<li><p>Build and install</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>make
make install
</pre></div>
</div>
<p>Optionaly, to gain confidence that your build works, you can
run tests</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>make check
</pre></div>
</div>
</li>
</ol>
<section id="extra-information">
<h3><a class="toc-backref" href="#id19" role="doc-backlink">Extra information</a><a class="headerlink" href="#extra-information" title="Permalink to this heading">¶</a></h3>
<p>The preferred way to build FriCAS is to use an already installed Lisp.
Also, it is preferable to use a separate build directory.  Assuming
that the source tree is in <code class="docutils literal notranslate"><span class="pre">$GITREPOS/fricas</span></code>, you build in the
<code class="docutils literal notranslate"><span class="pre">$FRICASBUILD</span></code> directory that can be anywhere outside the git
repository and need only exist during compilation of <a class="reference external" href="https://hemmecke.github.io/fricas/index.html">FriCAS</a> .</p>
<p>Currently <code class="docutils literal notranslate"><span class="pre">--with-lisp</span></code> option accepts all supported lisp variants,
namely SBCL, CLISP, ECL, GCL and Clozure CL (openmcl).  Note: the
argument is just a command to invoke the respective Lisp variant.
Build machinery will automatically detect which Lisp is in use and
adjust as needed.</p>
<p>Note that <a class="reference external" href="https://jfricas.readthedocs.io">jFriCAS</a> has currently only been tested to work with <a class="reference external" href="http://sbcl.sourceforge.net/platform-table.html">SBCL</a>.</p>
</section>
<section id="hyperdoc-and-graphics">
<h3><a class="toc-backref" href="#id20" role="doc-backlink">HyperDoc and graphics</a><a class="headerlink" href="#hyperdoc-and-graphics" title="Permalink to this heading">¶</a></h3>
<p>If you compile FriCAS from the <a class="reference external" href="https://github.com/hemmecke/fricas">FriCAS git repository</a>, and <code class="docutils literal notranslate"><span class="pre">configure</span></code>
does not detect the <code class="docutils literal notranslate"><span class="pre">xvfb-run</span></code> program, then graphic examples will
not be built.  This results in broken HyperDoc pages – all graphic
examples will be missing (and trying to access them will crash
hypertex).</p>
<p>The get working graphic examples login into X and replace <code class="docutils literal notranslate"><span class="pre">make</span></code>
above by the following</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>make MAYBE_VIEWPORTS=viewports
</pre></div>
</div>
<p>Alternatively, after <code class="docutils literal notranslate"><span class="pre">make</span></code> finishes use</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>make viewports
</pre></div>
</div>
<p><em>Important</em>: building graphic examples accesses the X server, so it
will not work on text console.  During build drawings will temporarily
appear on the screen.  Redirecting X via <code class="docutils literal notranslate"><span class="pre">ssh</span></code> should work fine, but
may be slow.</p>
<p>It is possible to use the <code class="docutils literal notranslate"><span class="pre">xvfb-run</span></code> program, replacing
<code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">viewports</span></code> above by</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>xvfb-run -a -s &#39;-screen 0 1024x768x24&#39; make viewports
</pre></div>
</div>
</section>
<section id="algebra-optimization">
<h3><a class="toc-backref" href="#id21" role="doc-backlink">Algebra optimization</a><a class="headerlink" href="#algebra-optimization" title="Permalink to this heading">¶</a></h3>
<p>When writing/compiling programs there is always tradeoff between speed
and safety.  Programs may include many checks to detect errors early
(and allow recovery).  Such programs are safe but checks take time so
the program is slower.  Or a program may just blindly goes forward
hoping that everything goes well.  Typically the second program will be
faster, but in case of problems it may crash without any hint why and
take user data with it.</p>
<p>Safety checks may be written by programmers, but another possibility
is to have a compiler which automatically inserts various checks.
FriCAS is compiled by a Lisp compiler and Lisp compilers may insert
safety checks.  How many checks are inserted may be controlled by the
user.  By default FriCAS tries to strike good balance between speed and
safety.  However, some FriCAS users want different tradeoff.  The</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>--enable-algebra-optimization=S
</pre></div>
</div>
<p>option to configure allows changing this setting: S is a Lisp
expression specifying speed/safety tradeoff used by Lisp compiler.  For
example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>--enable-algebra-optimization=&quot;((speed 3) (safety 0))&quot;
</pre></div>
</div>
<p>chooses fastest (but unsafe) variant, while</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>--enable-algebra-optimization=&quot;((speed 2) (safety 3))&quot;
</pre></div>
</div>
<p>should be very safe (but possibly slow).</p>
<p>Note: this setting affects only algebra (that is mathematical code).
The rest of FriCAS always uses default setting.  Rationale for this is
that mathematical code is unlikely to contain errors which can crash
the whole system.</p>
</section>
<section id="using-gmp-with-sbcl-or-clozure-cl">
<h3><a class="toc-backref" href="#id22" role="doc-backlink">Using GMP with SBCL or Clozure CL</a><a class="headerlink" href="#using-gmp-with-sbcl-or-clozure-cl" title="Permalink to this heading">¶</a></h3>
<p>Currently on average FriCAS is fastest when compiled using <a class="reference external" href="http://sbcl.sourceforge.net/platform-table.html">SBCL</a>.
However, SBCL normally uses its own routines for computations with
large numbers and those routines are slower than <a class="reference external" href="https://gmplib.org">GMP</a>.  FriCAS now has
special support to replace sbcl arithmetic routines by GMP.  To use
this support install GMP including header files (development package
if you install via a package manager).  Currently there are two
available <a class="reference external" href="https://gmplib.org">GMP</a> versions, version 5 is much faster than version 4.  Then
configure FriCAS adding <code class="docutils literal notranslate"><span class="pre">--enable-gmp</span></code> option to the <code class="docutils literal notranslate"><span class="pre">configure</span></code>
arguments.</p>
<p>FriCAS also has support for using <a class="reference external" href="https://gmplib.org">GMP</a> with <a class="reference external" href="http://ccl.clozure.com/manual/chapter2.2.html">Clozure CL</a>.  Currently
Clozure CL with GMP works on 32/64 bit Intel/AMD processors and ARM
(using Clozure CL with GMP is not supported on Power PC processors).</p>
<p>When you have GMP installed in a non-standard location (this usually
means anything other than <code class="docutils literal notranslate"><span class="pre">/usr</span></code> or <code class="docutils literal notranslate"><span class="pre">/usr/local</span></code>) then you can
specify the location with</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>configure --with-gmp=PATH
</pre></div>
</div>
<p>This means that the header files are in <code class="docutils literal notranslate"><span class="pre">PATH/include</span></code> and libgmp
is in <code class="docutils literal notranslate"><span class="pre">PATH/lib</span></code>.  If you have a different setup, then you can
specify</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>--with-gmp-include=INCLUDEPATH --with-gmp-lib=LIBPATH
</pre></div>
</div>
<p>(specify the directories where the header files and libgmp are found,
respectively).</p>
<p>These options also implicitly set <code class="docutils literal notranslate"><span class="pre">--enable-gmp</span></code>.  However, if
<code class="docutils literal notranslate"><span class="pre">--enable-gmp=no</span></code> is given, then <code class="docutils literal notranslate"><span class="pre">--with-gmp=...</span></code>,
<code class="docutils literal notranslate"><span class="pre">--with-gmp-include=...</span></code> and <code class="docutils literal notranslate"><span class="pre">--with-gmp-lib=...</span></code> is ignored.</p>
</section>
<section id="building-documentation">
<h3><a class="toc-backref" href="#id23" role="doc-backlink">Building documentation</a><a class="headerlink" href="#building-documentation" title="Permalink to this heading">¶</a></h3>
<p>After a build of FriCAS, (suppose your build directory is under
<code class="docutils literal notranslate"><span class="pre">$FRICASBUILD</span></code>), the <a class="reference external" href="https://hemmecke.github.io/fricas/index.html">FriCAS home page</a> can be built via</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>cd $FRICASBUILD/src/doc
make doc
</pre></div>
</div>
<p>This builds the full content of the <a class="reference external" href="https://hemmecke.github.io/fricas/index.html">FriCAS home page</a> including the
<a class="reference external" href="https://hemmecke.github.io/fricas/book.pdf">FriCAS Book</a> (also known as the FriCAS User Guide) into the
directory <code class="docutils literal notranslate"><span class="pre">src/doc/html</span></code> from which it can be committed to the
<code class="docutils literal notranslate"><span class="pre">gh-pages</span></code> branch of the official <a class="reference external" href="https://github.com/hemmecke/fricas">FriCAS git repository</a>.</p>
<p>Most links also work fine if you start</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>firefox src/doc/html/index.html
</pre></div>
</div>
<p>but some links point to the web.  If you want the links referring only
to the data on your computer, you call the compilation like this</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>cd $FRICASBUILD/src/doc
make localdoc
</pre></div>
</div>
<p>This will have broken references to the
<a class="reference external" href="https://fricas.github.io/fricas-notebooks/">FriCAS Demos and Tutorials</a>
as they live in a separate repository.  Do the following to get a local
copy and thus have working references.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>cd $FRICASBUILD/src/doc/html
git clone -b gh-pages https://github.com/fricas/fricas-notebooks
</pre></div>
</div>
<p>For more control on the generation of the FriCAS website content,
you can set various variables (see <code class="docutils literal notranslate"><span class="pre">src/doc/Makefile.in</span></code>)
in the <a class="reference external" href="https://github.com/hemmecke/fricas">FriCAS git repository</a>.
For example, if you like to push to your forked FriCAS repository and
refer to branch <code class="docutils literal notranslate"><span class="pre">foo</span></code> instead of <code class="docutils literal notranslate"><span class="pre">master</span></code> then do as follows
(replace <code class="docutils literal notranslate"><span class="pre">hemmecke</span></code> by your account name).</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>make PACKAGE_SOURCE=https://github.com/hemmecke/fricas \
     BRANCH=foo \
     PACKAGE_URL=https://hemmecke.github.io/fricas \
     doc
</pre></div>
</div>
<p>If you want to change the version information provided by default
through <code class="docutils literal notranslate"><span class="pre">configure.ac</span></code>, you can add a variable assignment like this
to the above command.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>PACKAGE_VERSION=$(git log -1 --pretty=%H)
PACKAGE_VERSION=&quot;1.3.6+ `date +&#39;%Y-%m-%d %H:%M&#39;`&quot;
</pre></div>
</div>
<p>Then, checkout the <code class="docutils literal notranslate"><span class="pre">gh-pages</span></code> branch and put the data from
<code class="docutils literal notranslate"><span class="pre">$BUILD/src/doc/html</span></code> into your <code class="docutils literal notranslate"><span class="pre">gh-pages</span></code> branch.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>git clone git@github.com:hemmecke/fricas.git
git checkout gh-pages
git rm -rf .
rm &#39;.gitignore&#39;
echo &#39;https://help.github.com/articles/using-jekyll-with-pages&#39; &gt; .nojekyll
cp -a $BUILD/src/doc/html/* .
rm -r _sources/api/
git add .
git commit -m &quot;$PACKAGE_VERSION&quot;
git push origin gh-pages
</pre></div>
</div>
<p>You must use <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">checkout</span> <span class="pre">--orphan</span> <span class="pre">gh-pages</span></code> if you do not yet have
a <code class="docutils literal notranslate"><span class="pre">gh-pages</span></code> branch.</p>
<p>Optional: If you add</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>text/x-spad       spad
</pre></div>
</div>
<p>to <code class="docutils literal notranslate"><span class="pre">/etc/mime.types</span></code> and in firefox associate <code class="docutils literal notranslate"><span class="pre">text/x-spad</span></code> with
your editor, then clicking on a <code class="docutils literal notranslate"><span class="pre">.spad</span></code> file opens the <code class="docutils literal notranslate"><span class="pre">.spad</span></code>
file in this editor.</p>
</section>
<section id="aldor-library-libfricas-al">
<h3><a class="toc-backref" href="#id24" role="doc-backlink">Aldor library libfricas.al</a><a class="headerlink" href="#aldor-library-libfricas-al" title="Permalink to this heading">¶</a></h3>
<p>You can not only extend the FriCAS library by <code class="docutils literal notranslate"><span class="pre">.spad</span></code> files (SPAD
programs), but also by <code class="docutils literal notranslate"><span class="pre">.as</span></code> files (<a class="reference external" href="https://github.com/aldorlang/aldor">Aldor</a> programs).  For the latter
to work FriCAS needs a library <code class="docutils literal notranslate"><span class="pre">libfricas.al</span></code>.</p>
<p>This library can be build as follows.
(An Aldor compiler is of course a prerequisite.)</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>configure --enable-aldor --prefix=/tmp/usr
( cd src/aldor &amp;&amp;  make )
make install
</pre></div>
</div>
<p>After that you should be able to compile and use the program below in
a FriCAS session via</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>)compile sieve.as
sieve 10
</pre></div>
</div>
<p>The program <code class="docutils literal notranslate"><span class="pre">sieve.as</span></code> is:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>--
-- sieve.as: A prime number sieve to count primes &lt;= n.
--
#include &quot;fricas&quot;

N ==&gt; NonNegativeInteger;
import from Boolean, N, Integer;

sieve(n: N): N  == {
    isprime: PrimitiveArray Boolean := new(n+1, true);
    np: N := 0;
    two: N := 2;
    for p in two..n | isprime(p::Integer) repeat {
        np := np + 1;
        for i in two*p..n by p::Integer repeat {
            isprime(i::Integer) := false;
        }
    }
    np
}
</pre></div>
</div>
</section>
</section>
<section id="execute-jfricas-and-enjoy">
<h2><a class="toc-backref" href="#id25" role="doc-backlink">Execute jfricas and enjoy</a><a class="headerlink" href="#execute-jfricas-and-enjoy" title="Permalink to this heading">¶</a></h2>
<p>Put the following input into the file <code class="docutils literal notranslate"><span class="pre">$FDIR/foo.input</span></code>.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>-- # FriCAS demo notebook

)set output algebra off
setFormat!(FormatMathJax)$JFriCASSupport

-- Here we compute $\frac{d^2}{dx^2} sin(x^3)$.

D(sin(x^3),x,2)

-- We compute the indefinite integral $\int \sin x \cdot e^x dx$.

integrate(exp(x)*sin(x), x)
</pre></div>
</div>
<p>Then start via <code class="docutils literal notranslate"><span class="pre">jfricas</span></code>, load <code class="docutils literal notranslate"><span class="pre">foo.input</span></code> and enjoy.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>cd $FDIR
jfricas
</pre></div>
</div>
<p>If something does not work then look at the end of <code class="docutils literal notranslate"><span class="pre">fricaskernel.py</span></code>
and experiment with different versions of how to start FriCAS.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>FRICASKERNEL=$(find $JFRICASINSTALL -type f | grep &#39;fricaskernel\.py$&#39;)
emacs $FRICASKERNEL
</pre></div>
</div>
<p>You can also download or clone the demo notebooks from
<a class="reference external" href="https://github.com/fricas/fricas-notebooks/">https://github.com/fricas/fricas-notebooks/</a> and compare them with what
you see at
<a class="reference external" href="https://fricas.github.io/fricas-notebooks/index.html">FriCAS Demos and Tutorials</a>.</p>
</section>
<section id="install-frimacs-optional">
<h2><a class="toc-backref" href="#id26" role="doc-backlink">Install frimacs (optional)</a><a class="headerlink" href="#install-frimacs-optional" title="Permalink to this heading">¶</a></h2>
<p><a class="reference external" href="https://github.com/pdo/frimacs">frimacs</a> is an <a class="reference external" href="https://www.gnu.org/software/emacs/">Emacs</a> mode for FriCAS with special features to
edit <code class="docutils literal notranslate"><span class="pre">.input</span></code> and <code class="docutils literal notranslate"><span class="pre">.spad</span></code> files as well as executing a <a class="reference external" href="https://hemmecke.github.io/fricas/index.html">FriCAS</a>
session inside an <a class="reference external" href="https://www.gnu.org/software/emacs/">Emacs</a> buffer.</p>
<p>Install as follows.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>cd $GITREPOS
git clone https://github.com/pdo/frimacs.git
</pre></div>
</div>
<p>If your <code class="docutils literal notranslate"><span class="pre">GITREPOS=/home/hemmecke/fricas</span></code>, then add the line</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>(load-file &quot;/home/hemmecke/fricas/frimacs/frimacs.el&quot;)
</pre></div>
</div>
<p>to your <code class="docutils literal notranslate"><span class="pre">.emacs</span></code> or <code class="docutils literal notranslate"><span class="pre">.emacs.d/init.el</span></code> file.</p>
<p>To start a <a class="reference external" href="https://hemmecke.github.io/fricas/index.html">FriCAS</a> session use</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>M-x run-fricas
</pre></div>
</div>
</section>
<section id="known-problems">
<h2><a class="toc-backref" href="#id27" role="doc-backlink">Known problems</a><a class="headerlink" href="#known-problems" title="Permalink to this heading">¶</a></h2>
<ul>
<li><p>currently when using case insensitive filesystem (typically on
macOS and Windows), the git version can only be built in a
separate directory (in-tree build will fail).  This does not affect
release tarball.</p></li>
<li><p>In general, any error when generating documentation will cause build
to hang.</p></li>
<li><p>32-bit sbcl from 1.5.9 to 2.1.3 may miscompile floating point
comparisons.   Due to this most plots will fail.   The problem is
fixed in newer versions of sbcl.   Alternatively, use older
version of sbcl.   64-bit sbcl works OK.</p></li>
<li><p>by default sbcl 1.0.54 and newer limits memory use to 1GB, which is
too small for heavy use.  To work around this one can pass
<code class="docutils literal notranslate"><span class="pre">--dynamic-space-size</span></code> argument during sbcl build to increase
default limit.
We recommend limit slightly smaller than amount of
available RAM (in this way FriCAS will be able to use almost all
RAM, but limit should prevent thrashing).</p></li>
<li><p>Some Linux versions, notably SuSE, by default seem to have very
small limit on virtual memory.  This causes build failure when using
sbcl or Clozure CL.  Also if limit on virtual memory is too small
sbcl-based or Clozure CL-based FriCAS binary will silently fail at
startup.  The simplest workaround is to increase limit, in the shell
typing</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ulimit -v unlimited
</pre></div>
</div>
<p>Alternatively for sbcl one can use <code class="docutils literal notranslate"><span class="pre">--dynamic-space-size</span></code> argument
to decrease use of virtual memory.</p>
</li>
<li><p>CLISP built with threads support may fail to compile FriCAS.</p></li>
<li><p>On new Linux kernel build using Clisp may take very long time.  This
is caused by frequent calls to <code class="docutils literal notranslate"><span class="pre">fsync</span></code> performed without need by
Clisp.</p></li>
<li><p>on some systems (notably MAC OSX) when using sbcl default limit of
open files may be too low.  To workaround increase limit (experiments
suggest that 512 open files is enough).  This should not be needed in
FriCAS 1.1.7.</p></li>
<li><p>sbcl from 1.3.1 to 1.3.4 runs out of memory when compiling FriCAS.
This is fixed in newer versions of sbcl.</p></li>
<li><p>using sbcl from 1.0.47 to 1.0.49 compilation is very slow (few hours
on fast machine).  This is fixed in newer versions of sbcl.</p></li>
<li><p>sbcl-1.0.29 has a bug in the <code class="docutils literal notranslate"><span class="pre">directory</span></code> function which causes
build failure.  This problem is fixed in 1.0.29.54.rc1.</p></li>
<li><p>1.0.29.54.rc1 has broken complex <code class="docutils literal notranslate"><span class="pre">tanh</span></code> function – you will get
wrong results when applying <code class="docutils literal notranslate"><span class="pre">tanh</span></code> to <code class="docutils literal notranslate"><span class="pre">Complex</span> <span class="pre">DoubleFloat</span></code>.</p></li>
<li><p>in sbcl 1.0.35 and up Control-C handling did not work.  This should
be fixed in current FriCAS.</p></li>
<li><p>prerelease gcl from gcl git repository is incompatible with FriCAS
and build will fail.</p></li>
<li><p>older gcl had serious problems on Macs and Windows.</p></li>
<li><p>released gcl-2.6.9 has a bug which causes failure of FriCAS build.
This problem is fixed in 2.6.10 and later but but there is a
different one.  Namely, FriCAS builds but apparently on some machines
is miscompiled using released 2.6.10 or 2.6.11 or 2.6.12.</p></li>
<li><p>On Gentoo system installed gcl probably will not work, one need to
build own one.</p></li>
<li><p>Older version of gcl are incompatible with Fedora “exec-shield” and
strong address space randomization (setting randomize_va_space to
2).  Newest CVS version of 2.6.8 branch of gcl fixes this problem.</p></li>
<li><p>gcl needs bfd library.  Many Linux systems include version of bfd
library which is incompatible with gcl.  In the past we advised to
use in such case the following configure line</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>configure --disable-xgcl --disable-dynsysbfd --disable-statsysbfd --enable-locbfd
</pre></div>
</div>
</li>
<li><p>Boehm garbage collector included in old ECL (version 6.8) is incompatible
with Fedora strong address space randomization (setting randomize_va_space
to 2).   Using newer version of Boehm garbage collector (7.0 or 7.1) or
newer ECL should solve this problem.</p></li>
<li><p>Striping FriCAS binaries is likely to break them.  In particular
Clisp based FriCAS may crash with message</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>module &#39;syscalls&#39; requires package OS.
</pre></div>
</div>
<p>while sbcl will show only loader prompt.</p>
</li>
<li><p>On Mac OSX Tiger some users reported problems with pseudoterminals,
build stopped with the message</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>fork_Axiom: Failed to reopen server: No such file or directory
</pre></div>
</div>
<p>This problem is believed to be fixed in FriCAS-1.0.5 (and later).</p>
</li>
<li><p>ECL 9.6.2 (and probably also 9.6.1 and 9.6.0) has a bug with
handling string constants which causes build based on this version
to fail.  This bugs is fixed in newer versions.  ECL 9.7.1 generates
wrong C code, so that build fails.  This is fixed in newer versions.</p></li>
<li><p>Unicode-enabled ECL before 9.8.4 is unable to build FriCAS.</p></li>
<li><p>ECL up to version 0.9l may segfault at exit.  This is usually
harmless, but may cause build to hang (for example when generating
<code class="docutils literal notranslate"><span class="pre">ug13.pht</span></code>).</p></li>
<li><p>Clozure CL 1.10 apparently miscompiles some operations on U32Matrix.
Version 1.11 works OK.</p></li>
<li><p>Clozure CL 1.7 and 1.6 apparently miscompiles FriCAS.  Versions 1.8
and newer and 1.5 and earlier work OK.</p></li>
<li><p>Clozure CL earlier than release 1.2 (former Openmcl) has a bug in
Lisp printer.  This bug causes incorrect printing of FriCAS types.
Also, Clozure CL earlier than release 1.2 has bug in complex cosine
function.  Those bugs are fixed in release 1.2.  If you want to use
earlier version you can work around the bugs applying the
<code class="docutils literal notranslate"><span class="pre">contib/omcl.diff</span></code> patch and recompiling the compiler (see the
patch or Clozure CL documentation for instructions).</p></li>
<li><p>Older versions of Clisp may fail to build FriCAS complaining about
opening already opened file – this is error is spurious, the file
in question in fact is closed, but for some reason Clisp got
confused.</p></li>
</ul>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h3><a href="index.html">Table of Contents</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="api/index.html">FriCAS API</a></li>
<li class="toctree-l1"><a class="reference internal" href="features.html">Features</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="download.html">Download</a></li>
<li class="toctree-l1"><a class="reference internal" href="help.html">Help</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="development.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="citation.html">Citation</a></li>
<li class="toctree-l1"><a class="reference internal" href="history.html">History</a></li>
</ul>

  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/install.rst.txt"
           rel="nofollow">Show Source</a></li>
    <li><a href="https://github.com/hemmecke/fricas/blob/wip/fricas-sbcl-hunchentoot/src/doc/sphinx/source/install.rst"
           rel="nofollow">Show on GitHub</a></li>
    <li><a href="https://github.com/hemmecke/fricas/edit/wip/fricas-sbcl-hunchentoot/src/doc/sphinx/source/install.rst"
           rel="nofollow">Edit on GitHub</a></li>
  </ul>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="help.html" title="Help"
             >next</a> |</li>
        <li class="right" >
          <a href="download.html" title="Download"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">FriCAS</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="download.html" >Download</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Installation Guide</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2007-2020, FriCAS Team.
    </div>
  </body>
</html>